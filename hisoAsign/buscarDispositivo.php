<?php	try {			$conexion=include ("../db_connect.php");			$db = new DB_CONNECT();			 			$result = array();			$result["error"] = 0;			$result["descripcion"] = '';			$result["total"] = 10;			$result["rows"] = array();			$rows_reg = 10;			$query = ' ';			$flag=-1;			$id_dis = isset($_GET['id_dis']) ? $_GET['id_dis'] : $flag;			if($id_dis!=$flag){				$query = " SELECT HA.id, SUC.nombre, CONCAT(DIR.calle,' ', DIR.altura) as direccion, LOC.nombre as localidad FROM histoasignacion as HA INNER JOIN sucursal as SUC on HA.id_suc=SUC.id INNER JOIN direccion as DIR on SUC.id_dir=DIR.id INNER JOIN localidad as LOC on LOC.id=DIR.id_loc WHERE HA.fechaBaja='1900-01-01' and HA.id_dis='$id_dis'";				$rs = mysql_query(" SELECT count(*) FROM histoasignacion as HA INNER JOIN sucursal as SUC on HA.id_suc=SUC.id INNER JOIN direccion as DIR on SUC.id_dir=DIR.id INNER JOIN localidad as LOC on LOC.id=DIR.id_loc WHERE HA.fechaBaja='1900-01-01' and HA.id_dis='$id_dis' ");			}						$row = mysql_fetch_row($rs);			$result["total"] = $row[0];			$rows_reg = $result["total"];			$rs = mysql_query($query) or die(mysql_error());			$rows = array();			while ($row = mysql_fetch_object($rs)) { //Recupera una fila del objeto $rs				array_push($rows, $row);			}			$result["rows"] = $rows;			//Busco posibles errores:			if ($result["total"] <= 0) {				$result["error"] = -1;				$result["descripcion"] = "No se enconetraron datos para el dispositivo: " . $id_dis;			}		} catch (exception $e) {			$result["error"] = -400;			$result["descripcion"] = "Error al ejecutar SQL";		}	echo json_encode($result);	?>